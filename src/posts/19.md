---
title: The Glodot is real!
description: '"Can we get much higher?"'
tags:
  - gleam
  - godot
date: 2025-07-19
image: https://i.imgur.com/mduNOpT.webp
---

## What?

{% if lang == 'vi' %}
  **Glodot** == [Godot](https://godotengine.org) + [Gleam](https://gleam.run). NÃ³ lÃ  cÃ¡ch Ä‘á»ƒ cháº¡y code Gleam trong Godot.
{% else %}
  **Glodot** == [Godot](https://godotengine.org) + [Gleam](https://gleam.run). It's a way to run Gleam code inside Godot.
{% endif %}

## Who?

{% if lang == 'vi' %}
  _"Ai nghÄ© ra cÃ¡ch nÃ y?"_ - MÃ¬nh nghÄ© ra cÃ¡ch nÃ y!

  _"Glodot phÃ¹ há»£p cho ai?"_ - Cho nhÆ°ng ngÆ°á»i thÃ­ch [FP (Functional programming)](https://vi.wikipedia.org/wiki/L%E1%BA%ADp_tr%C3%ACnh_h%C3%A0m) vÃ  muá»‘n dÃ¹ng nÃ³ cho gamedev.
{% else %}
  _"Who discover this?"_ - Me!

  _"Glodot is for whom?"_ - It's for people who like [FP (Functional programming)](https://en.wikipedia.org/wiki/Functional_programming) and want to use it for gamedev.
{% endif %}

## When/where?

{% if lang == 'vi' %}
  Viá»‡c sá»­ dá»¥ng Glodot trá»Ÿ nÃªn ráº¥t lÃ½ tÆ°á»Ÿng khi ta cáº§n viáº¿t thuáº­t toÃ¡n vÃ  xá»­ lÃ½ cÃ¡c thá»© bÃªn trong [Domain logic](https://en.wikipedia.org/wiki/Business_logic), sá»­ dá»¥ng Gleam ká»ƒ cáº£ khi viáº¿t code Ä‘Æ¡n giáº£n nhÆ° xá»© lÃ­ hÃ nh Ä‘á»™ng vuá»‘t cho [game 2048](https://play2048.co) cÅ©ng trá»Ÿ nÃªn dá»… thá»Ÿ hÆ¡n chÃ¡n váº¡n so vá»›i GDscript.

  Tuy nhiÃªn, nhÆ° má»i thá»© liÃªn quan Ä‘áº¿n FP, nÃ³ chá»‰ tá»‘t cho Domain logic, chá»© nÃ³ sáº½ khÃ´ng tiá»‡n láº¯m khi dÃ¹ng code Ä‘á»ƒ tÆ°Æ¡ng tÃ¡c nhiá»u vá»›i "tháº¿ giá»›i thá»±c", nhÆ° xá»­ lÃ½ váº­t lÃ½ cháº³ng háº¡n...
{% else %}
  Glodot is ideal for [the domain logic](https://en.wikipedia.org/wiki/Business_logic) (like writing complex algorithms). Even for simple stuff like handling result from swipe gestures in a [2048 game](https://play2048.co), writing in Gleam is way more breathable compared to GDScript.

  However, like everything FP, its only good inside domain logic. It will be quite inconvenient to interacts heavily with the "real world," like handling physics for exmaple...
{% endif %}

## Why?

{% if lang == 'vi' %}
  Godot lÃ  má»™t game engine xá»‹n nhÆ°ng GDscript thÃ¬ khÃ´ng háº³n, nÃ³ khÃ´ng tá»‘t bÃªn trong domain logic. VÃ  C# cÃ³ tá»‘t hÆ¡n nhÆ°ng khÃ´ng Ä‘á»§ tá»‘t nhÆ° má»™t ngÃ´n ngá»¯ FP háº³n hoi.

  Gleam lÃ  má»™t sá»± cá»©u tháº¿, lÃ  máº£nh ghÃ©p hoÃ n háº£o cho sá»± thiáº¿u há»¥t cá»§a Godot. Syntax cá»§a nÃ³ Ä‘áº¹p, hiá»‡n Ä‘áº¡i mÃ  láº¡i quen thuá»™c, nÃ³ dá»… Ä‘á»c, dá»… quáº£n lÃ½ vÃ  dá»… há»c (cÃ³ thá»ƒ há»c chá»‰ trong má»™t ngÃ y), khÃ´ng chá»‰ tháº¿ tooling cá»§a nÃ³ cÃ²n ráº¥t tiá»‡n, tiá»‡n hÆ¡n cá»§a Lua, Python, C#...

  VÃ¬ tháº¿ nÃªn Ä‘Ã¢y lÃ  tá»• há»£p hoÃ n háº£o:
  - GDscript Ä‘á»ƒ tiá»‡n cho viá»‡c xá»­ lÃ½ tÆ°Æ¡ng tÃ¡c vÃ  váº­t lÃ½ vá»›i "tháº¿ giá»›i thá»±c".
  - Gleam Ä‘á»ƒ viáº¿t cho domain logic functions vá»›i input/output Ä‘Ã£ Ä‘á»‹nh sáºµn, cho cÃ¡c thuáº­t toÃ¡n hoáº·c tÃ­nh toÃ¡n phá»©c táº¡p.
{% else %}
  Godot is a great game engine but GDscript is not a good language to do domain logic stuffs. And yes, C# is better but not as good as a real FP langauge.

  Gleam is the savior that fill the gap in the Godot ecosystem. Its syntax is beautiful, modern, familiar, easy to read, to manage and to learn (can be learn in a day). Plus Gleam's tooling is convenient, more than its of Lua, Python, C#...

  Therefore, this is the perfect combination:
  - GDscript for convenient "real world" interactions and handle physic.
  - Gleam for writing domain logic functions with predefined input and output, like complex algorithms/calculations.
{% endif %}

## How?

{% if lang == 'vi' %}
  Con Ä‘Æ°á»ng káº¿t ná»‘i Godot vá»›i Gleam Ä‘i nhÆ° sau:

  - **[Godot Mono](https://docs.godotengine.org/en/stable/tutorials/scripting/c_sharp/c_sharp_basics.html):** Äá»ƒ cháº¡y Ä‘Æ°á»£c code C# trong Godot.
  - **[ClearScript](https://github.com/Microsoft/ClearScript):** Äá»ƒ cháº¡y Ä‘Æ°á»£c code Javascript trong C# [(vÃ  Ä‘Ã¢y lÃ  cÃ¡ch Ä‘á»ƒ dÃ¹ng NuGet packages trong Godot)](https://docs.godotengine.org/en/stable/tutorials/scripting/c_sharp/c_sharp_basics.html#using-nuget-packages-in-godot).
  - **[Bun](https://bun.sh) hoáº·c báº¥t cá»© JS bundler nÃ o:** Äá»ƒ bundler nhiá»u file JS vÃ o thÃ nh má»™t.
  - **[Gleam compiler](https://gleam.run/command-line-reference):** Äá»ƒ compiler code xá»‹n viáº¿t báº±ng Gleam ğŸ˜‰.
{% else %}
  The road to connect from Godot to Gleam is as follows:

  - **[Godot Mono](https://docs.godotengine.org/en/stable/tutorials/scripting/c_sharp/c_sharp_basics.html):** To use C# in Godot.
  - **[ClearScript](https://github.com/Microsoft/ClearScript):** [_Use that NuGet package in Godot_](https://docs.godotengine.org/en/stable/tutorials/scripting/c_sharp/c_sharp_basics.html#using-nuget-packages-in-godot) to run Javascript code in C#.
  - **[Bun](https://bun.sh) or any JS bundler:** To bundler Javascript code to one single `.js` file.
  - **[Gleam compiler](https://gleam.run/command-line-reference):** To compiler all the epic codes you write.
{% endif %}

{% if lang == 'vi' %}
  Dá»± Ã¡n Glodot sáº½ cÃ³ cáº¥u trÃºc files nhÆ° sau:
{% else %}
  Your Glodot files structure should look like this:
{% endif %}

```
.  {% if lang == 'vi' %}(Root cá»§a Godot project){% else %}(Root of Godot project){% endif %}
â”œâ”€â”€ core  {% if lang == 'vi' %}(Root cá»§a Gleam package){% else %}(Root of Gleam package){% endif %}
â”‚Â Â  â”œâ”€â”€ gleam.toml
â”‚Â Â  â”œâ”€â”€ manifest.toml
â”‚Â Â  â”œâ”€â”€ package.json
â”‚Â Â  â”œâ”€â”€ src
â”‚Â Â  â”‚Â Â  â””â”€â”€ core
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ core.gleam  {% if lang == 'vi' %}(File chá»©a táº¥t cáº£ cÃ¡c function cáº§n truy cáº­p tá»« ngoÃ i Gleam){% else %}(The file that contains all functions to be accessible from outside Gleam){% endif %}
â”‚Â Â  â”‚Â Â      â””â”€â”€ ...
â”œâ”€â”€ project.godot
â”œâ”€â”€ project.csproj
â”œâ”€â”€ core.txt  {% if lang == 'vi' %}(Code Gleam-ra-JS Ä‘Ã£ Ä‘Æ°á»£c bundle){% else %}(Bundled Gleam-to-JS code){% endif %}
â”œâ”€â”€ core.gd  {% if lang == 'vi' %}(Util Ä‘á»ƒ cháº¡y code Ä‘Ã£ bundle trong Godot){% else %}(Util to execute bundled code in Godot){% endif %}
â””â”€â”€ V8.cs  {% if lang == 'vi' %}(Util Ä‘á»ƒ cháº¡y JS trong Godot){% else %}(Util to execute JS code in Godot){% endif %}
```

### {% if lang == 'vi' %}PhÃ­a Gleam{% else %}Gleam side{% endif %}

{% if lang == 'vi' %}
  Äáº§u tiÃªn, táº¡o má»™t package Gleam bÃªn trong root cá»§a dá»± Ã¡n Godot:
{% else %}
  First create a Gleam package inside your Godot project's root:
{% endif %}

```sh
gleam new core # {% if lang == 'vi' %}KhÃ´ng nháº¥t thiáº¿t pháº£i tÃªn lÃ  `core`, Ä‘á»ƒ tÃªn lÃ  gÃ¬ cÅ©ng Ä‘Æ°á»£c.{% else %}It's could be named anything.{% endif %}
```

{% if lang == 'vi' %}
  Rá»“i viáº¿t cÃ¡c functions domain logic. Khi xong, táº¡o má»™t file duy nháº¥t chá»©a táº¥t cáº£ cÃ¡c hÃ m Ä‘á»ƒ cÃ³ thá»ƒ truy cáº­p tá»« bÃªn ngoÃ i Gleam (Ä‘áº·t tÃªn lÃ  `core.gleam`):
{% else %}
  Then write your domain logic stuffs here. When you done, make a signle file that contains all functions to be accessible from outside of Gleam (name it `core.gleam`):
{% endif %}

```rust
import core/a_stuffs
import core/b_stuffs

pub fn fn_a(input: String) -> String {
  a_stuffs.fn_a(input)
}

pub fn fn_b(input: String) -> String {
  b_stuffs.fn_b(input)
}

// ...
```

{% if lang == 'vi' %}
  âš ï¸ Cáº¢NH BÃO! Cáº¢NH BÃO Lá»šN! custom Type bÃªn trong Gleam khÃ´ng thá»ƒ Ä‘Æ°á»£c truy cáº­p tá»« bÃªn ngoÃ i, Ã­t ra thÃ¬ nÃ³ khÃ´ng hÃ nh xá»­ nhÆ° ta mong muá»‘n Ä‘Ã¢u. Chá»‰ cÃ³ `Int`, `Float` vÃ  `String` lÃ  cÃ³ thá»ƒ dÃ¹ng Ä‘Æ°á»£c thÃ´i. Tháº­m chÃ­ `List` vÃ  `Dict` cÅ©ng khÃ´ng pháº£i lÃ  Array vÃ  Object cá»§a JS. Tá»‘t hÆ¡n háº¿t lÃ  nÃªn bá»c input vÃ  output thÃ nh string JSON Ä‘á»ƒ cÃ³ thá»ƒ xá»­ lÃ½.
{% else %}
  âš ï¸ WARNING! BIG WARNING! You cannot use custom Gleam type as input/output outside of Gleam, at least it's not behaved as you thinks. You can only use `Int`, `Float` and `String`. Even `List` and `Dict` is not the same as JS's Array and Object. The best solution is to warp input and output as JSON string.
{% endif %}

{% if lang == 'vi' %}
  Sau khi viáº¿t Gleam code Ä‘á»ƒ cÃ³ thá»ƒ cháº¡y tá»« Godot xong, hÃ£y Ä‘áº£m báº£o lÃ  mÃ¬nh Ä‘áº·t target cá»§a package lÃ  JS trong config `gleam.toml`:
{% else %}
  So after you write you fancy code in a Gleam package for your game, make sure to set the target to JS in the `gleam.toml` config file:
{% endif %}

```diff
  name = "core"
  version = "1.0.0"
+ target = "javascript"

...
```

{% if lang == 'vi' %}
  Rá»“i bundler code JS sau má»—i láº§n compiler:
{% else %}
  Then bundler the JS codes after each time you compiler:
{% endif %}

```sh
cd ./core
bun build ./build/dev/javascript/core/core/core.mjs --outfile ../core.txt
```

{% if lang == 'vi' %}
  ÄÃºng váº¥y, Ä‘á»ƒ Ä‘uÃ´i cá»§a file nÃ³ lÃ  `.txt` chá»© khÃ´ng pháº£i `.js` Ä‘á»ƒ Godot cÃ³ thá»ƒ nháº­n dáº¡ng lÃ  file chá»¯ vÃ  Ä‘á»c ná»™i dung bÃªn trong Ä‘áº¥y.
{% else %}
  Yep it's end with `.txt` so that Godot can detect and read the texts inside that file.
{% endif %}

### {% if lang == 'vi' %}PhÃ­a Godot{% else %}Godot side{% endif %}

{% if lang == 'vi' %}
  Äáº§u tiÃªn cÃ i [ClearScript](https://github.com/Microsoft/ClearScript) trong mÃ¡y:
{% else %}
  First install [ClearScript](https://github.com/Microsoft/ClearScript) to your system:
{% endif %}

```sh
nuget install Microsoft.ClearScript.Complete
```

{% if lang == 'vi' %}
  Sau Ä‘áº¥y thÃªm nÃ³ vÃ o `project.csproj`:
{% else %}
  Then add it to the `project.csproj` file:
{% endif %}

```diff
  <Project Sdk="Godot.NET.Sdk/4.4.1">
    <PropertyGroup>
      <TargetFramework>net8.0</TargetFramework>
      <EnableDynamicLoading>true</EnableDynamicLoading>
      <RootNamespace>project</RootNamespace>
    </PropertyGroup>
+   <ItemGroup>
+     <PackageReference Include="Microsoft.ClearScript.Complete" Version="7.5.0" />
+   </ItemGroup>
  </Project>
```

{% if lang == 'vi' %}
  Viáº¿t má»™t util tÃªn lÃ  `V8.cs` Ä‘á»ƒ cháº¡y code JS:
{% else %}
  Write an util name `V8.cs` in your project to execute JS code:
{% endif %}

```cs
using Godot;
using System;
using Microsoft.ClearScript.V8;

public partial class V8 : Node
{
    private static V8ScriptEngine _engine = new V8ScriptEngine();

    public static string eval(string code)
    {
        return Convert.ToString(_engine.Evaluate(code));
    }
}
```

{% if lang == 'vi' %}
  Cuá»‘i cÃ¹ng, táº¡o má»™t util Ä‘á»ƒ cháº¡y code Gleam Ä‘Ã£ xuáº¥t vÃ  bundle (Ä‘áº·t tÃªn file lÃ  `core.gd` Ä‘i cho Ä‘á»“ng bá»™):
{% else %}
  Finally, make an util to execute Gleam-to-JS bundled code (name it `core.gd`):
{% endif %}

```gdscript
extends Node

const _v8 := preload("res://src/V8.cs")


func _ready() -> void:
    var core_file := FileAccess.open(&"res://core.txt", FileAccess.READ)
    var core_code := core_file.get_as_text()
    _v8.eval(core_code)


func fn_a(arg: Variant) -> Variant:
	return _invoke(&"fn_a", arg)


func fn_b(arg: Variant) -> Variant:
	return _invoke(&"fn_b", arg)


func _invoke(funcName: String, argument: Variant) -> Variant:
    var code: Variant = &"{funcName}(\"{argument}\")".format({
        &"funcName": funcName,
        &"argument": JSON.stringify(argument).replace(&"\\", &"\\\\").replace(&"\"", &"\\\""),
    })

    var result: Variant = _v8.eval(code)

    var json := JSON.new()
    var error := json.parse(result)

    if error:
        if result != &"":
            printerr(result)

        return null

    return json.data
```

_That's all fork, stay gleamy~!_
